/**
 * @file    clock_config.h
 * @author  Enrique Emanuel Decima
 * @brief   Driver para controlar un motor paso a paso
 * @version 1.0
 * @date    2025
 *
 */

#ifndef MOTORPAP_H_
#define MOTORPAP_H_

#define STEPS_FOR_REV 64

/**
 * @brief Estructura que representa un servomotor SG90 y su configuración PWM.
 */
typedef struct {
    TIM_HandleTypeDef *htim;   /**< Timer utilizado para el control de velocidad */
    GPIO_TypeDef* Port;
    uint16_t Motor_Pin_A;      /**< Pines de salida */
    uint16_t Motor_Pin_B;
    uint16_t Motor_Pin_C;
    uint16_t Motor_Pin_D;
    uint16_t Angle;           /**< Ancho máximo en µs (ej: 2000 o 2500) */
}MotorPAP_HandleTypeDef;

typedef enum{
	MOTORPAP_CLOCKWISE,
	MOTORPAP_ANTICLOCKWISE
}MotorPAP_Direction;

void MotorPAP_Init(MotorPAP_HandleTypeDef* hmot, TIM_HandleTypeDef *htim, GPIO_TypeDef* Port,uint16_t PINA, uint16_t PINB, uint16_t PINC, uint16_t PIND);
void MotorPAP_StepForward(MotorPAP_HandleTypeDef hmot);
void MotorPAP_OneRev(MotorPAP_HandleTypeDef hmot, MotorPAP_Direction direction);

#endif /* PERIFERICOS_INC_MOTORPAP_H_ */
